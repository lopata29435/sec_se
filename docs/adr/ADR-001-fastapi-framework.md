# ADR-001: –í—ã–±–æ—Ä FastAPI –≤ –∫–∞—á–µ—Å—Ç–≤–µ –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞

**–î–∞—Ç–∞:** 2025-10-01
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü—Ä–∏–Ω—è—Ç–æ
**–ê–≤—Ç–æ—Ä:** SecDev Team
**–°–≤—è–∑–∞–Ω–Ω—ã–µ NFR:** NFR-07, NFR-08, NFR-09 (Performance), NFR-01 (Input Validation)
**–°–≤—è–∑–∞–Ω–Ω—ã–µ —Ä–∏—Å–∫–∏:** R04 (–û—à–∏–±–∫–∏ –±–µ–∑ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏)

---

## Context

–î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ Habit Tracker API —Ç—Ä–µ–±—É–µ—Ç—Å—è –≤—ã–±—Ä–∞—Ç—å –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –Ω–∞ Python, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç:
- –û–±–µ—Å–ø–µ—á–∏–≤–∞—Ç—å –≤—ã—Å–æ–∫—É—é –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (p95 ‚â§ 200ms @ 50 RPS)
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –≤–∞–ª–∏–¥–∞—Ü–∏—é –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—Ç—å –≤—Å—Ç—Ä–æ–µ–Ω–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é API (OpenAPI/Swagger)
- –û–±–µ—Å–ø–µ—á–∏–≤–∞—Ç—å —Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ Python 3.10+

**–ö–æ–Ω—Ç–µ–∫—Å—Ç –ø—Ä–æ–µ–∫—Ç–∞:**
- Habit Tracker API ‚Äî REST API –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø—Ä–∏–≤—ã—á–µ–∫
- –¶–µ–ª–µ–≤–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞: 50-100 RPS (NFR-10, NFR-11)
- –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏: –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (NFR-01), –∑–∞—â–∏—Ç–∞ –æ—Ç injection (NFR-05)
- –°—Ç—É–¥–µ–Ω—á–µ—Å–∫–∏–π –ø—Ä–æ–µ–∫—Ç —Å —É–ø–æ—Ä–æ–º –Ω–∞ secure development practices

**–°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π:**
- Python 3.13
- Uvicorn (ASGI server)
- Docker –¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏–∏

---

## Decision

**–í—ã–±—Ä–∞–Ω FastAPI** –≤ –∫–∞—á–µ—Å—Ç–≤–µ –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞ –¥–ª—è Habit Tracker API.

**–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ:**
1. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** FastAPI –æ—Å–Ω–æ–≤–∞–Ω –Ω–∞ Starlette (ASGI) –∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –æ–¥–Ω—É –∏–∑ —Å–∞–º—ã—Ö –≤—ã—Å–æ–∫–∏—Ö –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π —Å—Ä–µ–¥–∏ Python-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–≤ (~10-20x –±—ã—Å—Ç—Ä–µ–µ Flask)
2. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è:** –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Pydantic –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –≤–∞–ª–∏–¥–∞—Ü–∏—é –∏–∑ –∫–æ—Ä–æ–±–∫–∏ (NFR-01)
3. **OpenAPI –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è Swagger UI –∏ ReDoc
4. **–¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:** –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Python type hints –∏ IDE autocomplete
5. **Async –ø–æ–¥–¥–µ—Ä–∂–∫–∞:** –ù–∞—Ç–∏–≤–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ async/await –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ I/O –æ–ø–µ—Ä–∞—Ü–∏–π

---

## Alternatives

### 1. Flask + Flask-RESTful
**–ü–ª—é—Å—ã:**
- –ü—Ä–æ—Å—Ç–æ—Ç–∞ –∏–∑—É—á–µ–Ω–∏—è
- –û–≥—Ä–æ–º–Ω–∞—è —ç–∫–æ—Å–∏—Å—Ç–µ–º–∞ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π
- –®–∏—Ä–æ–∫–æ–µ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –≤ –∏–Ω–¥—É—Å—Ç—Ä–∏–∏

**–ú–∏–Ω—É—Å—ã:**
- –°–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (WSGI), –º–µ–Ω—å—à–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- –ù–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–π –≤–∞–ª–∏–¥–∞—Ü–∏–∏ (–Ω—É–∂–µ–Ω Marshmallow/Flask-Pydantic)
- –ù–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ OpenAPI –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
- –°–ª–æ–∂–Ω–µ–µ –¥–æ—Å—Ç–∏—á—å NFR-07/08/09 (production latency targets)

**–ü–æ—á–µ–º—É –Ω–µ –≤—ã–±—Ä–∞–ª–∏:** –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–∞ –¥–ª—è NFR-07/08/09, –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–π –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —Ä–∏—Å–∫ NFR-01 –Ω–∞—Ä—É—à–µ–Ω–∏–π.

### 2. Django REST Framework (DRF)
**–ü–ª—é—Å—ã:**
- –ë–æ–≥–∞—Ç—ã–π –Ω–∞–±–æ—Ä —Ñ—É–Ω–∫—Ü–∏–π "–∏–∑ –∫–æ—Ä–æ–±–∫–∏" (auth, admin, ORM)
- –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω–∞—è –≤—Ä–µ–º–µ–Ω–µ–º —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å
- –í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è ORM –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î

**–ú–∏–Ω—É—Å—ã:**
- –ò–∑–±—ã—Ç–æ—á–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –¥–ª—è –ø—Ä–æ—Å—Ç–æ–≥–æ API (bloat)
- –ú–µ–¥–ª–µ–Ω–Ω–µ–µ FastAPI –≤ 2-3 —Ä–∞–∑–∞
- –°–ª–æ–∂–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤
- ORM –∑–∞–º–µ–¥–ª—è–µ—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É –ø—Ä–æ—Ç–æ—Ç–∏–ø–∞

**–ü–æ—á–µ–º—É –Ω–µ –≤—ã–±—Ä–∞–ª–∏:** Overkill –¥–ª—è MVP, –∏–∑–±—ã—Ç–æ—á–Ω–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å –¥–ª—è —É—á–µ–±–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞, –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –Ω–∏–∂–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π.

### 3. Aiohttp
**–ü–ª—é—Å—ã:**
- –í—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (async)
- –õ–µ–≥–∫–æ–≤–µ—Å–Ω–æ—Å—Ç—å
- –ì–∏–±–∫–æ—Å—Ç—å –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ

**–ú–∏–Ω—É—Å—ã:**
- –ù–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–π –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- –ù–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
- –ú–µ–Ω—å—à–∞—è —ç–∫–æ—Å–∏—Å—Ç–µ–º–∞ –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å FastAPI
- –¢—Ä–µ–±—É–µ—Ç –±–æ–ª—å—à–µ boilerplate –∫–æ–¥–∞

**–ü–æ—á–µ–º—É –Ω–µ –≤—ã–±—Ä–∞–ª–∏:** –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ Pydantic –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –∏ OpenAPI –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –≤—Ä–µ–º—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏, –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–π –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –ø–æ–≤—ã—à–∞–µ—Ç —Ä–∏—Å–∫ NFR-01.

---

## Consequences

### –ü–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–µ

1. **‚úÖ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (NFR-07/08/09)**
   - p95 latency: 1.93ms –¥–ª—è GET /habits (—Ü–µ–ª—å ‚â§200ms) ‚úÖ
   - p95 latency: 2.22ms –¥–ª—è POST /habits (—Ü–µ–ª—å ‚â§300ms) ‚úÖ
   - –ó–∞–ø–∞—Å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ 100x –¥–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è

2. **‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (NFR-01, NFR-05)**
   - Pydantic –≤–∞–ª–∏–¥–∞—Ü–∏—è –∑–∞—â–∏—â–∞–µ—Ç –æ—Ç injection –∏–∑ –∫–æ—Ä–æ–±–∫–∏
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤ –∏ –¥–∏–∞–ø–∞–∑–æ–Ω–æ–≤
   - –°–Ω–∏–∂–∞–µ—Ç —Ä–∏—Å–∫–∏ T3.1 (Injection attacks), T6.1 (Invalid input)

3. **‚úÖ Developer Experience**
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è OpenAPI –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (/docs, /redoc)
   - IDE –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Å type hints
   - –ú–µ–Ω—å—à–µ boilerplate –∫–æ–¥–∞ ‚Üí –±—ã—Å—Ç—Ä–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

4. **‚úÖ –¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å**
   - TestClient –∏–∑ –∫–æ—Ä–æ–±–∫–∏
   - Dependency Injection –¥–ª—è –º–æ–∫–æ–≤
   - 93.6% test coverage –¥–æ—Å—Ç–∏–≥–Ω—É—Ç–æ

### –û—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ

1. **‚ö†Ô∏è –ú–æ–ª–æ–¥–æ–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫**
   - FastAPI v0.x (–Ω–µ 1.0) ‚Äî –≤–æ–∑–º–æ–∂–Ω—ã breaking changes
   - –ú–µ–Ω—å—à–µ –≥–æ—Ç–æ–≤—ã—Ö —Ä–µ—à–µ–Ω–∏–π –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å Django/Flask
   - **–ú–∏—Ç–∏–≥–∞—Ü–∏—è:** –ó–∞–∫—Ä–µ–ø–∏—Ç—å –≤–µ—Ä—Å–∏–∏ –≤ requirements.txt, —Å–ª–µ–¥–∏—Ç—å –∑–∞ changelog

2. **‚ö†Ô∏è Async —Å–ª–æ–∂–Ω–æ—Å—Ç—å**
   - –¢—Ä–µ–±—É–µ—Ç –ø–æ–Ω–∏–º–∞–Ω–∏—è async/await
   - –°–ª–æ–∂–Ω–µ–µ –æ—Ç–ª–∞–¥–∫–∞ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –∫–æ–¥–∞
   - **–ú–∏—Ç–∏–≥–∞—Ü–∏—è:** –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å best practices, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å sync endpoints –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

3. **‚ö†Ô∏è –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç Pydantic**
   - –¢–µ—Å–Ω–∞—è —Å–≤—è–∑—å —Å Pydantic v2
   - –ú–∏–≥—Ä–∞—Ü–∏—è Pydantic v1‚Üív2 –±—ã–ª–∞ –±–æ–ª–µ–∑–Ω–µ–Ω–Ω–æ–π
   - **–ú–∏—Ç–∏–≥–∞—Ü–∏—è:** –ò–∑–æ–ª—è—Ü–∏—è –º–æ–¥–µ–ª–µ–π –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –º–æ–¥—É–ª–µ (app/models.py)

---

## Security Impact

### –£–≥—Ä–æ–∑—ã –∏–∑ Threat Model (P04)

| –£–≥—Ä–æ–∑–∞ | –í–ª–∏—è–Ω–∏–µ FastAPI | –°–º—è–≥—á–µ–Ω–∏–µ |
|--------|-----------------|-----------|
| T3.1: SQL/NoSQL Injection | ‚úÖ Pydantic –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤ |
| T6.1: Invalid input tampering | ‚úÖ –°—Ö–µ–º—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∏–∑ –∫–æ—Ä–æ–±–∫–∏ | Field validators –≤ –º–æ–¥–µ–ª—è—Ö |
| T4.2: Validation details leakage | ‚ö†Ô∏è –î–µ—Ñ–æ–ª—Ç–Ω—ã–µ –æ—à–∏–±–∫–∏ —Ä–∞—Å–∫—Ä—ã–≤–∞—é—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É | –ö–∞—Å—Ç–æ–º–Ω—ã–µ exception handlers (app/errors.py) |
| T8.1: Stack trace leakage | ‚ö†Ô∏è Debug mode —Ä–∞—Å–∫—Ä—ã–≤–∞–µ—Ç traceback | ENVIRONMENT=production —É–±–∏—Ä–∞–µ—Ç –¥–µ—Ç–∞–ª–∏ |

### –†–∏—Å–∫–∏ –∏–∑ Risk Register (P04)

| –†–∏—Å–∫ | –°—Ç–∞—Ç—É—Å | –°–º—è–≥—á–µ–Ω–∏–µ |
|------|--------|-----------|
| R04: Exceptions –±–µ–∑ –æ–±—Ä–∞–±–æ—Ç–∫–∏ | üîÑ –ß–∞—Å—Ç–∏—á–Ω–æ | Generic exception handler —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω |
| R01: –ù–µ—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ | ‚ùå –ù–µ —Ä–µ—à–µ–Ω–æ | FastAPI –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç OAuth2/JWT (–±—É–¥—É—â–µ–µ) |

---

## Implementation

### –î–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

**–§–∞–π–ª—ã:**
- `app/main.py` ‚Äî FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å endpoints
- `app/models.py` ‚Äî Pydantic –º–æ–¥–µ–ª–∏ —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π
- `tests/test_performance.py` ‚Äî –¢–µ—Å—Ç—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ NFR-07/08/09

**–¢–µ—Å—Ç—ã:**
```python
# tests/test_performance.py (lines 48-60)
def test_get_habits_performance_baseline():
    """NFR-07: GET /habits p95 ‚â§ 200ms @ 50 RPS"""
    response_times = []
    iterations = 100

    for _ in range(iterations):
        start = time.perf_counter()
        response = client.get("/habits")
        end = time.perf_counter()
        assert response.status_code == 200
        response_times.append((end - start) * 1000)

    p95 = quantiles(response_times, n=100)[94]
    assert p95 <= 200, f"p95 latency {p95:.2f}ms exceeds 200ms"
```

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**
```python
# app/main.py (lines 23-28)
app = FastAPI(
    title="Habit Tracker API",
    version="0.1.0",
    docs_url="/docs",
    redoc_url="/redoc",
)
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:**
- ‚úÖ GET /habits: p95 = 1.93ms (—Ü–µ–ª—å ‚â§200ms)
- ‚úÖ POST /habits: p95 = 2.22ms (—Ü–µ–ª—å ‚â§300ms)
- ‚úÖ GET /habits/{id}/stats: p95 = 2.69ms (—Ü–µ–ª—å ‚â§500ms)

---

## Acceptance Criteria (DoD)

- [x] FastAPI —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ `requirements.txt`
- [x] –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ Uvicorn
- [x] –í—Å–µ endpoints –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ HTTP –∫–æ–¥—ã
- [x] OpenAPI –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –Ω–∞ `/docs`
- [x] Performance —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç (NFR-07/08/09)
- [x] Test coverage ‚â•90% (NFR-19: 93.6% ‚úÖ)

---

## Rollout Plan

### –§–∞–∑–∞ 1: MVP (–ó–∞–≤–µ—Ä—à–µ–Ω–æ ‚úÖ)
- [x] –ë–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- [x] CRUD endpoints –¥–ª—è –ø—Ä–∏–≤—ã—á–µ–∫
- [x] Pydantic –º–æ–¥–µ–ª–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- [x] OpenAPI –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –§–∞–∑–∞ 2: Security (–í –ø—Ä–æ—Ü–µ—Å—Å–µ üîÑ)
- [x] –ö–∞—Å—Ç–æ–º–Ω—ã–µ exception handlers (app/errors.py)
- [ ] Rate limiting middleware (app/security.py ‚Äî –≥–æ—Ç–æ–≤, –Ω–æ –æ—Ç–∫–ª—é—á–µ–Ω)
- [ ] JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (R01)

### –§–∞–∑–∞ 3: Production (–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ üìã)
- [ ] –ù–∞—Å—Ç—Ä–æ–π–∫–∞ HTTPS (NFR-06)
- [ ] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å correlation_id
- [ ] –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –º–µ—Ç—Ä–∏–∫ (Prometheus)

**Feature Flag:**
```python
# app/config.py
USE_RFC7807_ERRORS = os.getenv("USE_RFC7807_ERRORS", "true").lower() == "true"
```

---

## Links

- **NFR –¥–æ–∫—É–º–µ–Ω—Ç—ã:** [docs/security-nfr/NFR.md](../security-nfr/NFR.md)
- **Threat Model:** [docs/threat-model/README.md](../threat-model/README.md)
- **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:** [app/main.py](../../app/main.py)
- **–¢–µ—Å—Ç—ã:** [tests/test_performance.py](../../tests/test_performance.py)
- **FastAPI –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** https://fastapi.tiangolo.com/

---

## Review & Updates

| –î–∞—Ç–∞ | –ò–∑–º–µ–Ω–µ–Ω–∏–µ | –ê–≤—Ç–æ—Ä |
|------|-----------|-------|
| 2025-10-01 | –ü–µ—Ä–≤–∞—è –≤–µ—Ä—Å–∏—è ADR | SecDev Team |
| 2025-10-06 | –î–æ–±–∞–≤–ª–µ–Ω—ã —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã performance —Ç–µ—Å—Ç–æ–≤ | SecDev Team |
