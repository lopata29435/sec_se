# BDD Scenarios for Non-Functional Requirements

## –í–≤–µ–¥–µ–Ω–∏–µ

–î–∞–Ω–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç BDD —Å—Ü–µ–Ω–∞—Ä–∏–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–ª—é—á–µ–≤—ã—Ö –Ω–µ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –ø—Ä–æ–µ–∫—Ç–∞ Habit Tracker API –≤ —Ñ–æ—Ä–º–∞—Ç–µ Gherkin.

**–î–∞—Ç–∞:** 2025-10-06
**–í–µ—Ä—Å–∏—è:** 1.1 (–æ–±–Ω–æ–≤–ª–µ–Ω–æ –ø–æ—Å–ª–µ P06)

---

## Feature: Security ‚Äî –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (NFR-01)

### Scenario: –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–∏–≤—ã—á–∫–∏ —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π –¥–∞–Ω–Ω—ã—Ö
```gherkin
Given API —Å–µ—Ä–≤–∏—Å –∑–∞–ø—É—â–µ–Ω –∏ –¥–æ—Å—Ç—É–ø–µ–Ω
When –∫–ª–∏–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç POST /habits —Å –≤–∞–ª–∏–¥–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
  """json
  {
    "name": "–ü–∏—Ç—å –≤–æ–¥—É",
    "description": "–í—ã–ø–∏–≤–∞—Ç—å 8 —Å—Ç–∞–∫–∞–Ω–æ–≤ –≤–æ–¥—ã –≤ –¥–µ–Ω—å",
    "frequency": "daily"
  }
  """
Then –æ—Ç–≤–µ—Ç –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å —Å—Ç–∞—Ç—É—Å 200 OK
And –ø—Ä–∏–≤—ã—á–∫–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Å–æ–∑–¥–∞–Ω–∞ —Å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
And response time –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å < 150ms
```

### Scenario: –û—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –Ω–µ–≤–∞–ª–∏–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø—Ä–∏–≤—ã—á–∫–∏
```gherkin
Given API —Å–µ—Ä–≤–∏—Å –∑–∞–ø—É—â–µ–Ω –∏ –¥–æ—Å—Ç—É–ø–µ–Ω
When –∫–ª–∏–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç POST /habits —Å –ø—É—Å—Ç—ã–º –∏–º–µ–Ω–µ–º
  """json
  {
    "name": "",
    "description": "–û–ø–∏—Å–∞–Ω–∏–µ",
    "frequency": "daily"
  }
  """
Then –æ—Ç–≤–µ—Ç –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å —Å—Ç–∞—Ç—É—Å 422 Unprocessable Entity
And —Ç–µ–ª–æ –æ—Ç–≤–µ—Ç–∞ –¥–æ–ª–∂–Ω–æ —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—É—é –æ—à–∏–±–∫—É
  """json
  {
    "error": {
      "code": "validation_error",
      "message": "Habit name cannot be empty"
    }
  }
  """
And PII –¥–∞–Ω–Ω—ã–µ –ù–ï –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ –ª–æ–≥–∞—Ö
```

### Scenario: –ó–∞—â–∏—Ç–∞ –æ—Ç SQL injection
```gherkin
Given API —Å–µ—Ä–≤–∏—Å –∑–∞–ø—É—â–µ–Ω –∏ –¥–æ—Å—Ç—É–ø–µ–Ω
When –∫–ª–∏–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç POST /habits —Å SQL injection payload
  """json
  {
    "name": "'; DROP TABLE habits; --",
    "description": "test"
  }
  """
Then –æ—Ç–≤–µ—Ç –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å —Å—Ç–∞—Ç—É—Å 422 –∏–ª–∏ 400
And SQL –∫–æ–º–∞–Ω–¥—ã –ù–ï –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω—ã
And –¥–∞–Ω–Ω—ã–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å sanitized
```

---

## Feature: Performance ‚Äî –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ GET /habits (NFR-07)

### Scenario: –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –ø—Ä–∏–≤—ã—á–µ–∫ –ø–æ–¥ –Ω–∞–≥—Ä—É–∑–∫–æ–π
```gherkin
Given API —Å–µ—Ä–≤–∏—Å —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç –Ω–∞ staging –æ–∫—Ä—É–∂–µ–Ω–∏–∏
And –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å–æ–¥–µ—Ä–∂–∏—Ç 100 –ø—Ä–∏–≤—ã—á–µ–∫ –¥–ª—è —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
When –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –Ω–∞–≥—Ä—É–∑–æ—á–Ω—ã–π —Ç–µ—Å—Ç —Å 50 RPS –≤ —Ç–µ—á–µ–Ω–∏–µ 5 –º–∏–Ω—É—Ç
Then p95 –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–≤–µ—Ç–∞ –¥–ª—è GET /habits –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å ‚â§ 100ms
And p99 –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–≤–µ—Ç–∞ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å ‚â§ 150ms
And error rate –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å < 1%
```

### Scenario: –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–∏ –ø–∏–∫–æ–≤–æ–π –Ω–∞–≥—Ä—É–∑–∫–µ
```gherkin
Given API —Å–µ—Ä–≤–∏—Å —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç –Ω–∞ staging –æ–∫—Ä—É–∂–µ–Ω–∏–∏
When –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è spike —Ç–µ—Å—Ç —Å —Ä–µ–∑–∫–∏–º —É–≤–µ–ª–∏—á–µ–Ω–∏–µ–º –¥–æ 100 RPS
Then —Å–µ—Ä–≤–∏—Å –¥–æ–ª–∂–µ–Ω –æ—Å—Ç–∞–≤–∞—Ç—å—Å—è –æ—Ç–∑—ã–≤—á–∏–≤—ã–º
And p95 –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–≤–µ—Ç–∞ –ù–ï –¥–æ–ª–∂–µ–Ω –ø—Ä–µ–≤—ã—à–∞—Ç—å 200ms
And 0 –∑–∞–ø—Ä–æ—Å–æ–≤ –¥–æ–ª–∂–Ω—ã –∑–∞–≤–µ—Ä—à–∏—Ç—å—Å—è timeout'–æ–º
```

### Scenario Outline: –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
```gherkin
Given API —Å–µ—Ä–≤–∏—Å –∑–∞–ø—É—â–µ–Ω
When –∫–ª–∏–µ–Ω—Ç –≤—ã–ø–æ–ª–Ω—è–µ—Ç <method> –∑–∞–ø—Ä–æ—Å –∫ <endpoint>
Then –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å < <max_response_time>ms

Examples:
  | method | endpoint                 | max_response_time |
  | GET    | /health                  | 50                |
  | GET    | /habits                  | 100               |
  | POST   | /habits                  | 150               |
  | GET    | /habits/1/stats          | 200               |
  | POST   | /habits/1/track          | 150               |
  | PUT    | /habits/1                | 150               |
```

---

## Feature: Security ‚Äî –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ RFC7807 (NFR-02)

### Scenario: –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –æ—à–∏–±–æ–∫
```gherkin
Given API —Å–µ—Ä–≤–∏—Å –∑–∞–ø—É—â–µ–Ω
When –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –æ—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –Ω–∞ –ª—é–±–æ–º —ç–Ω–¥–ø–æ–∏–Ω—Ç–µ
Then –æ—Ç–≤–µ—Ç –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –ø–æ–ª–µ "error"
And –ø–æ–ª–µ "error" –¥–æ–ª–∂–Ω–æ —Å–æ–¥–µ—Ä–∂–∞—Ç—å "code" –∏ "message"
And —Ñ–æ—Ä–º–∞—Ç –¥–æ–ª–∂–µ–Ω —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å RFC7807
And response –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π HTTP —Å—Ç–∞—Ç—É—Å –∫–æ–¥
```

### Scenario: –ú–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ –æ—à–∏–±–∫–∞—Ö
```gherkin
Given API —Å–µ—Ä–≤–∏—Å –∑–∞–ø—É—â–µ–Ω
When –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –æ—à–∏–±–∫–∞ —Å –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–º–∏ PII –¥–∞–Ω–Ω—ã–º–∏
Then —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ –ù–ï –¥–æ–ª–∂–Ω–æ —Å–æ–¥–µ—Ä–∂–∞—Ç—å:
  | PII Type      |
  | email         |
  | phone number  |
  | internal IDs  |
  | stack traces  |
And –≤—Å–µ PII –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–º–∞—Å–∫–∏—Ä–æ–≤–∞–Ω—ã —Å–∏–º–≤–æ–ª–æ–º "*"
```

---

## Feature: Reliability ‚Äî API Uptime (NFR-12)

### Scenario: Health check —ç–Ω–¥–ø–æ–∏–Ω—Ç –≤—Å–µ–≥–¥–∞ –¥–æ—Å—Ç—É–ø–µ–Ω
```gherkin
Given API —Å–µ—Ä–≤–∏—Å —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç –Ω–∞ staging
When –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ —Ç–µ—á–µ–Ω–∏–µ 24 —á–∞—Å–æ–≤
Then GET /health –¥–æ–ª–∂–µ–Ω –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å 200 OK ‚â• 99% –≤—Ä–µ–º–µ–Ω–∏
And —Å—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ health check –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å < 50ms
And downtime –ù–ï –¥–æ–ª–∂–µ–Ω –ø—Ä–µ–≤—ã—à–∞—Ç—å 14.4 –º–∏–Ω—É—Ç –≤ –¥–µ–Ω—å
```

### Scenario: Graceful degradation –ø—Ä–∏ —Å–±–æ—è—Ö
```gherkin
Given API —Å–µ—Ä–≤–∏—Å —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–æ—Ä–º–∞–ª—å–Ω–æ
When –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ –≤ –æ–¥–Ω–æ–º –∏–∑ –º–æ–¥—É–ª–µ–π
Then —Å–µ—Ä–≤–∏—Å –¥–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å 500 Internal Server Error
And —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–º
And –¥—Ä—É–≥–∏–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–æ–ª–∂–Ω—ã –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å —Ä–∞–±–æ—Ç–∞—Ç—å
And –æ—à–∏–±–∫–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∑–∞–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∞ —Å correlation ID
```

---

## Feature: Security ‚Äî –£—è–∑–≤–∏–º–æ—Å—Ç–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (NFR-04)

### Scenario: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π –≤ production
```gherkin
Given –ø—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ deployment –≤ production
When –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è SCA (Software Composition Analysis)
Then –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ Critical —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å = 0
And –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ High —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å = 0
And –≤—Å–µ Medium —É—è–∑–≤–∏–º–æ—Å—Ç–∏ –¥–æ–ª–∂–Ω—ã –∏–º–µ—Ç—å plan –Ω–∞ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ
```

### Scenario: –ë—ã—Å—Ç—Ä–æ–µ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã—Ö —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π
```gherkin
Given –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è—Ö –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∞ Critical/High —É—è–∑–≤–∏–º–æ—Å—Ç—å
When —Å–æ–∑–¥–∞–µ—Ç—Å—è issue –¥–ª—è —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è
Then —É—è–∑–≤–∏–º–æ—Å—Ç—å –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —É—Å—Ç—Ä–∞–Ω–µ–Ω–∞ –≤ —Ç–µ—á–µ–Ω–∏–µ ‚â§ 7 –¥–Ω–µ–π
And patch –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω
And –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –∑–∞–¥–µ–ø–ª–æ–µ–Ω–æ
```

---

## Feature: Performance ‚Äî Rate Limiting (NFR-03)

### Scenario: –ó–∞—â–∏—Ç–∞ –æ—Ç abuse —á–µ—Ä–µ–∑ rate limiting
```gherkin
Given API —Å–µ—Ä–≤–∏—Å –∑–∞–ø—É—â–µ–Ω —Å rate limiting
When –æ–¥–∏–Ω IP –∞–¥—Ä–µ—Å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç > 100 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –º–∏–Ω—É—Ç—É
Then –∑–∞–ø—Ä–æ—Å—ã —Å–≤–µ—Ä—Ö –ª–∏–º–∏—Ç–∞ –¥–æ–ª–∂–Ω—ã –ø–æ–ª—É—á–∏—Ç—å 429 Too Many Requests
And response –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –∑–∞–≥–æ–ª–æ–≤–æ–∫ Retry-After
And –ª–µ–≥–∏—Ç–∏–º–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –æ—Ç –¥—Ä—É–≥–∏—Ö IP –ù–ï –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞—Ç—Ä–æ–Ω—É—Ç—ã
```

### Scenario: Rate limit –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
```gherkin
Given API —Å–µ—Ä–≤–∏—Å –∑–∞–ø—É—â–µ–Ω
When –∫–ª–∏–µ–Ω—Ç –ø—Ä–µ–≤—ã—à–∞–µ—Ç rate limit –Ω–∞ POST /habits
Then –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤–æ–∑–≤—Ä–∞—â–µ–Ω 429 —Å—Ç–∞—Ç—É—Å –∫–æ–¥
And —Ç–µ–ª–æ –æ—Ç–≤–µ—Ç–∞ –¥–æ–ª–∂–Ω–æ –æ–±—ä—è—Å–Ω—è—Ç—å –ø—Ä–∏—á–∏–Ω—É:
  """json
  {
    "error": {
      "code": "rate_limit_exceeded",
      "message": "Too many requests. Please try again later.",
      "retry_after": 60
    }
  }
  """
```

---

## Feature: Code Quality ‚Äî Test Coverage (NFR-19)

### Scenario: –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏
```gherkin
Given –ø—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ merge –≤ main
When –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è pytest —Å coverage
Then –æ–±—â–µ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å ‚â• 80%
And –≤—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –º–æ–¥—É–ª–∏ –¥–æ–ª–∂–Ω—ã –∏–º–µ—Ç—å ‚â• 90% coverage
And CI pipeline –¥–æ–ª–∂–µ–Ω fail –µ—Å–ª–∏ coverage < 80%
```

### Scenario: –í—Å–µ –Ω–æ–≤—ã–µ —Ñ–∏—á–∏ –ø–æ–∫—Ä—ã—Ç—ã —Ç–µ—Å—Ç–∞–º–∏
```gherkin
Given –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –Ω–æ–≤—ã–π API —ç–Ω–¥–ø–æ–∏–Ω—Ç
When —Å–æ–∑–¥–∞–µ—Ç—Å—è Pull Request
Then –Ω–æ–≤—ã–π –∫–æ–¥ –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å ‚â• 90% test coverage
And –¥–æ–ª–∂–Ω—ã –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å:
  | Test Type           |
  | unit tests          |
  | integration tests   |
  | error case tests    |
And CI –¥–æ–ª–∂–µ–Ω –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å merge –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–º coverage
```

---

## Negative Scenarios ‚Äî –ì—Ä–∞–Ω–∏—á–Ω—ã–µ —Å–ª—É—á–∞–∏ –∏ –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å

### Scenario: –û–±—Ä–∞–±–æ—Ç–∫–∞ —ç–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω–æ –±–æ–ª—å—à–∏—Ö –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
```gherkin
Given API —Å–µ—Ä–≤–∏—Å –∑–∞–ø—É—â–µ–Ω
When –∫–ª–∏–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç POST /habits —Å –æ—á–µ–Ω—å –¥–ª–∏–Ω–Ω—ã–º description (10,000 —Å–∏–º–≤–æ–ª–æ–≤)
Then –æ—Ç–≤–µ—Ç –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å —Å—Ç–∞—Ç—É—Å 422
And —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ —É–∫–∞–∑—ã–≤–∞—Ç—å –Ω–∞ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–µ –ª–∏–º–∏—Ç–∞
And —Å–µ—Ä–≤–∏—Å –ù–ï –¥–æ–ª–∂–µ–Ω —É–ø–∞—Å—Ç—å –∏–ª–∏ –∑–∞–≤–∏—Å–Ω—É—Ç—å
```

### Scenario: Concurrent requests –∫ –æ–¥–Ω–æ–º—É —Ä–µ—Å—É—Ä—Å—É
```gherkin
Given –ø—Ä–∏–≤—ã—á–∫–∞ —Å ID=1 —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
When 50 –∫–ª–∏–µ–Ω—Ç–æ–≤ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç PUT /habits/1
Then –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
And –¥–∞–Ω–Ω—ã–µ –ù–ï –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø–æ–≤—Ä–µ–∂–¥–µ–Ω—ã (race condition)
And –≤—Å–µ –æ—Ç–≤–µ—Ç—ã –¥–æ–ª–∂–Ω—ã –∏–º–µ—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Å—Ç–∞—Ç—É—Å –∫–æ–¥
```

### Scenario: –ü–æ–≤–µ–¥–µ–Ω–∏–µ –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```gherkin
Given API —Å–µ—Ä–≤–∏—Å –∑–∞–ø—É—â–µ–Ω
When –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ–π
Then –Ω–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã –¥–æ–ª–∂–Ω—ã –ø–æ–ª—É—á–∞—Ç—å 503 Service Unavailable
And GET /health –¥–æ–ª–∂–µ–Ω –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å —Å—Ç–∞—Ç—É—Å "degraded"
And —Å–µ—Ä–≤–∏—Å –¥–æ–ª–∂–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è –ø—Ä–∏ –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏–∏ –ë–î
```

### Scenario: –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö –¥–∞—Ç
```gherkin
Given API —Å–µ—Ä–≤–∏—Å –∑–∞–ø—É—â–µ–Ω
When –∫–ª–∏–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç POST /habits/1/track —Å –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π –¥–∞—Ç–æ–π
  """json
  {
    "completed_at": "2025-13-45"
  }
  """
Then –æ—Ç–≤–µ—Ç –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å —Å—Ç–∞—Ç—É—Å 422
And —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ —Å–æ–¥–µ—Ä–∂–∞—Ç—å "Invalid date format"
And —Å–µ—Ä–≤–∏—Å –ù–ï –¥–æ–ª–∂–µ–Ω –∑–∞–ø–∏—Å–∞—Ç—å –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
```

---

## Revision History

| –î–∞—Ç–∞       | –í–µ—Ä—Å–∏—è | –ê–≤—Ç–æ—Ä | –ò–∑–º–µ–Ω–µ–Ω–∏—è                                                    |
|------------|--------|-------|--------------------------------------------------------------|
| 2025-10-06 | 1.1    | Team  | –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ P06: –≤–∞–ª–∏–¥–∞—Ü–∏—è —á–µ—Ä–µ–∑ Pydantic —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞   |
| 2025-10-05 | 1.0    | Team  | –ü–µ—Ä–≤–∞—è –≤–µ—Ä—Å–∏—è BDD —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ NFR                              |

---

## –°—Ç–∞—Ç—É—Å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

### ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ (P06)
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ Pydantic (NFR-01)
- –ó–∞—â–∏—Ç–∞ –æ—Ç XSS injection
- RFC 7807 —Ñ–æ—Ä–º–∞—Ç –æ—à–∏–±–æ–∫ (NFR-02)
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö –¥–∞—Ç
- –¢–µ—Å—Ç—ã: `tests/test_validation.py` (35+ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤)

### üìã –ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ
- Rate limiting —Å—Ü–µ–Ω–∞—Ä–∏–∏ (NFR-03)
- Concurrent request handling
- Database unavailability scenarios
