# Risk Register ‚Äî Habit Tracker API

## –í–≤–µ–¥–µ–Ω–∏–µ

–î–∞–Ω–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç —Ä–µ–µ—Å—Ç—Ä —Ä–∏—Å–∫–æ–≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –¥–ª—è Habit Tracker API —Å –æ—Ü–µ–Ω–∫–æ–π –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏ (Likelihood) –∏ –≤–ª–∏—è–Ω–∏—è (Impact), —Å—Ç—Ä–∞—Ç–µ–≥–∏—è–º–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏, –≤–ª–∞–¥–µ–ª—å—Ü–∞–º–∏ –∏ —Å—Ä–æ–∫–∞–º–∏.

**–î–∞—Ç–∞:** 2025-10-10
**–í–µ—Ä—Å–∏—è:** 1.0
**–ü—Ä–æ–µ–∫—Ç:** Habit Tracker API

---

## –ú–µ—Ç–æ–¥–æ–ª–æ–≥–∏—è –æ—Ü–µ–Ω–∫–∏ —Ä–∏—Å–∫–æ–≤

### –®–∫–∞–ª–∞ Likelihood (L) ‚Äî –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å

| –ë–∞–ª–ª | –£—Ä–æ–≤–µ–Ω—å | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|---------|----------|
| 1 | Very Low | –ú–∞–ª–æ–≤–µ—Ä–æ—è—Ç–Ω–æ (< 5% –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –≤ —Ç–µ—á–µ–Ω–∏–µ –≥–æ–¥–∞) |
| 2 | Low | –†–µ–¥–∫–æ (5-20% –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å) |
| 3 | Medium | –í–æ–∑–º–æ–∂–Ω–æ (20-50% –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å) |
| 4 | High | –í–µ—Ä–æ—è—Ç–Ω–æ (50-80% –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å) |
| 5 | Very High | –ü–æ—á—Ç–∏ –Ω–µ–∏–∑–±–µ–∂–Ω–æ (> 80% –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å) |

### –®–∫–∞–ª–∞ Impact (I) ‚Äî –í–ª–∏—è–Ω–∏–µ

| –ë–∞–ª–ª | –£—Ä–æ–≤–µ–Ω—å | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|---------|----------|
| 1 | Minimal | –ù–µ–∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–µ –≤–ª–∏—è–Ω–∏–µ (–∑–∞–¥–µ—Ä–∂–∫–∞ < 1 —á–∞—Å, < 10 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π) |
| 2 | Minor | –ú–∞–ª–æ–µ –≤–ª–∏—è–Ω–∏–µ (–∑–∞–¥–µ—Ä–∂–∫–∞ 1-4 —á–∞—Å–∞, 10-100 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π) |
| 3 | Moderate | –°—Ä–µ–¥–Ω–µ–µ –≤–ª–∏—è–Ω–∏–µ (–∑–∞–¥–µ—Ä–∂–∫–∞ 4-24 —á–∞—Å–∞, —É—Ç–µ—á–∫–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö) |
| 4 | Major | –°–µ—Ä—å–µ–∑–Ω–æ–µ –≤–ª–∏—è–Ω–∏–µ (downtime > 1 –¥–µ–Ω—å, —É—Ç–µ—á–∫–∞ PII —Å–æ—Ç–µ–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π) |
| 5 | Critical | –ö–∞—Ç–∞—Å—Ç—Ä–æ—Ñ–∏—á–µ—Å–∫–æ–µ –≤–ª–∏—è–Ω–∏–µ (–ø–æ–ª–Ω–∞—è –∫–æ–º–ø—Ä–æ–º–µ—Ç–∞—Ü–∏—è, –º–∞—Å—Å–æ–≤–∞—è —É—Ç–µ—á–∫–∞, —é—Ä–∏–¥–∏—á–µ—Å–∫–∏–µ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è) |

### Risk Score = L √ó I

| Score | –£—Ä–æ–≤–µ–Ω—å —Ä–∏—Å–∫–∞ | –î–µ–π—Å—Ç–≤–∏—è |
|-------|---------------|----------|
| 1-3 | üü¢ Low | –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å, –ø—Ä–∏–Ω—è—Ç—å |
| 4-6 | üü° Medium | –°–Ω–∏–∑–∏—Ç—å –≤ —Ç–µ—á–µ–Ω–∏–µ 3 –º–µ—Å—è—Ü–µ–≤ |
| 8-12 | üü† High | –°–Ω–∏–∑–∏—Ç—å –≤ —Ç–µ—á–µ–Ω–∏–µ 1 –º–µ—Å—è—Ü–∞ |
| 15-25 | üî¥ Critical | –ù–µ–º–µ–¥–ª–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è (< 2 –Ω–µ–¥–µ–ª–∏) |

---

## –†–µ–µ—Å—Ç—Ä —Ä–∏—Å–∫–æ–≤

### R01: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
|----------|----------|
| **ID** | R01 |
| **–ù–∞–∑–≤–∞–Ω–∏–µ** | –õ—é–±–æ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —á–∏—Ç–∞—Ç—å –∏ –∏–∑–º–µ–Ω—è—Ç—å –¥–∞–Ω–Ω—ã–µ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π |
| **–°–≤—è–∑–∞–Ω–Ω—ã–µ —É–≥—Ä–æ–∑—ã** | T1.1 (Spoofing), T5.1 (Tampering), T5.2 (Info Disclosure), T11.1 (IDOR), T13.1 (IDOR Update) |
| **–ü–æ—Ç–æ–∫–∏ DFD** | F1, F11, F42, F46 |
| **Likelihood (L)** | 5 (Very High) ‚Äî –í —Ç–µ–∫—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ –¥–æ—Å—Ç—É–ø–Ω–æ |
| **Impact (I)** | 5 (Critical) ‚Äî –ü–æ–ª–Ω–∞—è –∫–æ–º–ø—Ä–æ–º–µ—Ç–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏ –∏ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö |
| **Risk Score** | **25** üî¥ **CRITICAL** |
| **–°—Ç—Ä–∞—Ç–µ–≥–∏—è** | **–°–Ω–∏–∑–∏—Ç—å** (Mitigate) ‚Äî –í–Ω–µ–¥—Ä–∏—Ç—å JWT/OAuth2 –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é |
| **–í–ª–∞–¥–µ–ª–µ—Ü** | Backend Team Lead |
| **–°—Ä–æ–∫** | **2025-10-31** (P0 –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç, –±–ª–æ–∫–∏—Ä—É–µ—Ç production) |
| **–ö—Ä–∏—Ç–µ—Ä–∏–π –∑–∞–∫—Ä—ã—Ç–∏—è** | ‚Ä¢ JWT middleware —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω<br/>‚Ä¢ –í—Å–µ endpoints –∑–∞—â–∏—â–µ–Ω—ã –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–æ–º `@requires_auth`<br/>‚Ä¢ Isolation –¥–∞–Ω–Ω—ã—Ö –ø–æ `user_id`<br/>‚Ä¢ –¢–µ—Å—Ç—ã –ø–æ–∫—Ä—ã–≤–∞—é—Ç unauthorized access (401, 403)<br/>‚Ä¢ NFR: 100% endpoints —Å auth |
| **–¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å** | üî¥ Open ‚Äî –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–æ–±–µ–ª |
| **–û—Å—Ç–∞—Ç–æ—á–Ω—ã–π —Ä–∏—Å–∫** | L=2, I=3, Score=6 (Medium) –ø–æ—Å–ª–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è auth |

---

### R02: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ Rate Limiting (DDoS —É—è–∑–≤–∏–º–æ—Å—Ç—å)

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
|----------|----------|
| **ID** | R02 |
| **–ù–∞–∑–≤–∞–Ω–∏–µ** | API –ø–æ–¥–≤–µ—Ä–∂–µ–Ω –∞—Ç–∞–∫–∞–º —Ç–∏–ø–∞ Denial of Service —á–µ—Ä–µ–∑ —Ñ–ª—É–¥ –∑–∞–ø—Ä–æ—Å–∞–º–∏ |
| **–°–≤—è–∑–∞–Ω–Ω—ã–µ —É–≥—Ä–æ–∑—ã** | T1.4 (DoS), T8.3 (Error flood), T9.2 (Health check DoS), T10.3 (Track flood) |
| **–ü–æ—Ç–æ–∫–∏ DFD** | F1, F28 |
| **Likelihood (L)** | 4 (High) ‚Äî –ü—É–±–ª–∏—á–Ω—ã–π API –±–µ–∑ –∑–∞—â–∏—Ç—ã, –ª–µ–≥–∫–æ —ç–∫—Å–ø–ª—É–∞—Ç–∏—Ä—É–µ—Ç—Å—è |
| **Impact (I)** | 4 (Major) ‚Äî –ü–æ–ª–Ω—ã–π downtime —Å–µ—Ä–≤–∏—Å–∞, –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ª–µ–≥–∏—Ç–∏–º–Ω—ã–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ |
| **Risk Score** | **16** üî¥ **CRITICAL** |
| **–°—Ç—Ä–∞—Ç–µ–≥–∏—è** | **–°–Ω–∏–∑–∏—Ç—å** (Mitigate) ‚Äî –í–Ω–µ–¥—Ä–∏—Ç—å rate limiting middleware |
| **–í–ª–∞–¥–µ–ª–µ—Ü** | DevOps Engineer |
| **–°—Ä–æ–∫** | **2025-11-15** (P1 –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –¥–ª—è production) |
| **–ö—Ä–∏—Ç–µ—Ä–∏–π –∑–∞–∫—Ä—ã—Ç–∏—è** | ‚Ä¢ Rate limiting middleware (100 req/min per IP) ‚Äî **NFR-03**<br/>‚Ä¢ Monitoring –∞–ª–µ—Ä—Ç–æ–≤ –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–∞<br/>‚Ä¢ Load test: —Å–µ—Ä–≤–∏—Å –≤—ã–¥–µ—Ä–∂–∏–≤–∞–µ—Ç 500 req/s —Å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º 429 Too Many Requests<br/>‚Ä¢ –û—Ç–¥–µ–ª—å–Ω—ã–π –ª–∏–º–∏—Ç –¥–ª—è `/health` (1000 req/min) |
| **–¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å** | üìã Planned v1.2 |
| **–û—Å—Ç–∞—Ç–æ—á–Ω—ã–π —Ä–∏—Å–∫** | L=2, I=2, Score=4 (Low) –ø–æ—Å–ª–µ rate limiting |

---

### R03: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ HTTPS –≤ production (Man-in-the-Middle)

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
|----------|----------|
| **ID** | R03 |
| **–ù–∞–∑–≤–∞–Ω–∏–µ** | –ü–µ—Ä–µ—Ö–≤–∞—Ç –∏ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ —Ç—Ä–∞–Ω–∑–∏—Ç–µ —á–µ—Ä–µ–∑ –Ω–µ–∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–æ–µ HTTP —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ |
| **–°–≤—è–∑–∞–Ω–Ω—ã–µ —É–≥—Ä–æ–∑—ã** | T1.2 (Tampering MITM), T1.3 (Info Disclosure), T6.3 (Habit pattern leak) |
| **–ü–æ—Ç–æ–∫–∏ DFD** | F1, F6 |
| **Likelihood (L)** | 3 (Medium) ‚Äî –í –ø—É–±–ª–∏—á–Ω—ã—Ö —Å–µ—Ç—è—Ö Wi-Fi –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å MITM —Å—Ä–µ–¥–Ω—è—è |
| **Impact (I)** | 4 (Major) ‚Äî –£—Ç–µ—á–∫–∞ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (–ø—Ä–∏–≤—ã—á–∫–∏, –ø–æ–≤–µ–¥–µ–Ω–∏–µ), –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ |
| **Risk Score** | **12** üü† **HIGH** |
| **–°—Ç—Ä–∞—Ç–µ–≥–∏—è** | **–°–Ω–∏–∑–∏—Ç—å** (Mitigate) ‚Äî Enforce HTTPS only |
| **–í–ª–∞–¥–µ–ª–µ—Ü** | DevOps Engineer |
| **–°—Ä–æ–∫** | **2025-11-30** (P1 –¥–ª—è production deployment) |
| **–ö—Ä–∏—Ç–µ—Ä–∏–π –∑–∞–∫—Ä—ã—Ç–∏—è** | ‚Ä¢ TLS 1.2+ –Ω–∞ Reverse Proxy (nginx/Traefik) ‚Äî **NFR-06**<br/>‚Ä¢ HSTS header (`Strict-Transport-Security: max-age=31536000`)<br/>‚Ä¢ Redirect HTTP ‚Üí HTTPS (301)<br/>‚Ä¢ TLS —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –æ—Ç Let's Encrypt/–¥—Ä—É–≥–æ–≥–æ CA<br/>‚Ä¢ E2E —Ç–µ—Å—Ç: –≤—Å–µ requests —á–µ—Ä–µ–∑ HTTPS |
| **–¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å** | üìã Planned v1.2 |
| **–û—Å—Ç–∞—Ç–æ—á–Ω—ã–π —Ä–∏—Å–∫** | L=1, I=2, Score=2 (Low) –ø–æ—Å–ª–µ HTTPS |

---

### R04: Stack Trace –∏ Internal Errors Disclosure

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
|----------|----------|
| **ID** | R04 |
| **–ù–∞–∑–≤–∞–Ω–∏–µ** | –£—Ç–µ—á–∫–∞ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö –¥–µ—Ç–∞–ª–µ–π —Å–∏—Å—Ç–µ–º—ã —á–µ—Ä–µ–∑ –æ—à–∏–±–∫–∏ –≤ production |
| **–°–≤—è–∑–∞–Ω–Ω—ã–µ —É–≥—Ä–æ–∑—ã** | T8.1 (Stack trace leak), T7.1 (Implementation details), T4.2 (Validation details) |
| **–ü–æ—Ç–æ–∫–∏ DFD** | F19, F18, F10 |
| **Likelihood (L)** | 4 (High) ‚Äî FastAPI –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –¥–µ—Ç–∞–ª—å–Ω—ã–µ –æ—à–∏–±–∫–∏ |
| **Impact (I)** | 3 (Moderate) ‚Äî –†–∞—Å–∫—Ä—ã—Ç–∏–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã, –ø–æ–º–æ—â—å –∞—Ç–∞–∫—É—é—â–µ–º—É –≤ reconnaissance |
| **Risk Score** | **12** üü† **HIGH** |
| **–°—Ç—Ä–∞—Ç–µ–≥–∏—è** | **–°–Ω–∏–∑–∏—Ç—å** (Mitigate) ‚Äî –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –æ—à–∏–±–æ–∫ |
| **–í–ª–∞–¥–µ–ª–µ—Ü** | Backend Developer |
| **–°—Ä–æ–∫** | **2025-10-25** (Quick win, P1) |
| **–ö—Ä–∏—Ç–µ—Ä–∏–π –∑–∞–∫—Ä—ã—Ç–∏—è** | ‚Ä¢ –í—Å–µ exceptions —á–µ—Ä–µ–∑ custom handler ‚Äî **NFR-02**<br/>‚Ä¢ –§–æ—Ä–º–∞—Ç RFC7807-like: `{"error": {"code": "...", "message": "..."}}`<br/>‚Ä¢ NO stack traces –≤ production (ENV=production)<br/>‚Ä¢ –¢–µ—Å—Ç—ã: –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∞ –¥–ª—è 4xx –∏ 5xx<br/>‚Ä¢ Code review: –Ω–µ—Ç `raise Exception("details")` —Å —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ |
| **–¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å** | üîÑ In Progress v1.1 ‚Äî Exception handlers –µ—Å—Ç—å, –Ω—É–∂–Ω–∞ —Ñ–∏–Ω–∞–ª–∏–∑–∞—Ü–∏—è |
| **–û—Å—Ç–∞—Ç–æ—á–Ω—ã–π —Ä–∏—Å–∫** | L=2, I=2, Score=4 (Low) |

---

### R05: IDOR (Insecure Direct Object Reference) –Ω–∞ habit_id

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
|----------|----------|
| **ID** | R05 |
| **–ù–∞–∑–≤–∞–Ω–∏–µ** | –î–æ—Å—Ç—É–ø –∫ —á—É–∂–∏–º –ø—Ä–∏–≤—ã—á–∫–∞–º —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–±–æ—Ä ID |
| **–°–≤—è–∑–∞–Ω–Ω—ã–µ —É–≥—Ä–æ–∑—ã** | T11.1 (IDOR read), T13.1 (IDOR update) |
| **–ü–æ—Ç–æ–∫–∏ DFD** | F42, F46 |
| **Likelihood (L)** | 5 (Very High) ‚Äî –¢—Ä–∏–≤–∏–∞–ª—å–Ω—ã–π –ø–µ—Ä–µ–±–æ—Ä sequential ID |
| **Impact (I)** | 4 (Major) ‚Äî –ß—Ç–µ–Ω–∏–µ –∏ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π |
| **Risk Score** | **20** üî¥ **CRITICAL** |
| **–°—Ç—Ä–∞—Ç–µ–≥–∏—è** | **–°–Ω–∏–∑–∏—Ç—å** (Mitigate) ‚Äî –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–ª–∞–¥–µ–ª—å—Ü–∞ –æ–±—ä–µ–∫—Ç–∞ |
| **–í–ª–∞–¥–µ–ª–µ—Ü** | Backend Developer |
| **–°—Ä–æ–∫** | **2025-10-31** (P0, —Å–≤—è–∑–∞–Ω–æ —Å R01 ‚Äî auth) |
| **–ö—Ä–∏—Ç–µ—Ä–∏–π –∑–∞–∫—Ä—ã—Ç–∏—è** | ‚Ä¢ –ü–æ—Å–ª–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è auth (R01): –ø—Ä–æ–≤–µ—Ä–∫–∞ `habit.user_id == current_user.id`<br/>‚Ä¢ –§—É–Ω–∫—Ü–∏—è `_find_habit_by_id_and_user(habit_id, user_id)`<br/>‚Ä¢ –¢–µ—Å—Ç—ã: –ø–æ–ø—ã—Ç–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ —á—É–∂–æ–º—É habit_id ‚Üí 403 Forbidden<br/>‚Ä¢ –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ: UUID –≤–º–µ—Å—Ç–æ sequential ID |
| **–¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å** | üî¥ Open ‚Äî –ó–∞–≤–∏—Å–∏—Ç –æ—Ç R01 |
| **–û—Å—Ç–∞—Ç–æ—á–Ω—ã–π —Ä–∏—Å–∫** | L=1, I=2, Score=2 (Low) |

---

### R06: Unbounded Resource Consumption (Memory Exhaustion)

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
|----------|----------|
| **ID** | R06 |
| **–ù–∞–∑–≤–∞–Ω–∏–µ** | –ò—Å—á–µ—Ä–ø–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏ –∏–∑-–∑–∞ –Ω–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–∏–≤—ã—á–µ–∫ –∏ –∑–∞–ø–∏—Å–µ–π |
| **–°–≤—è–∑–∞–Ω–Ω—ã–µ —É–≥—Ä–æ–∑—ã** | T5.3 (Unlimited habits), T15.3 (Memory overflow) |
| **–ü–æ—Ç–æ–∫–∏ DFD** | F11, F12 |
| **Likelihood (L)** | 3 (Medium) ‚Äî –¢—Ä–µ–±—É–µ—Ç—Å—è –Ω–∞–º–µ—Ä–µ–Ω–Ω–∞—è –∞—Ç–∞–∫–∞ –∏–ª–∏ –±–∞–≥gy –∫–ª–∏–µ–Ω—Ç |
| **Impact (I)** | 4 (Major) ‚Äî OOM crash, –ø–æ–ª–Ω—ã–π downtime |
| **Risk Score** | **12** üü† **HIGH** |
| **–°—Ç—Ä–∞—Ç–µ–≥–∏—è** | **–°–Ω–∏–∑–∏—Ç—å** (Mitigate) ‚Äî –ö–≤–æ—Ç—ã –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ |
| **–í–ª–∞–¥–µ–ª–µ—Ü** | Backend Developer + DevOps |
| **–°—Ä–æ–∫** | **2025-11-30** (P2, –Ω–æ quick win) |
| **–ö—Ä–∏—Ç–µ—Ä–∏–π –∑–∞–∫—Ä—ã—Ç–∏—è** | ‚Ä¢ –õ–∏–º–∏—Ç: MAX_HABITS_PER_USER = 100<br/>‚Ä¢ –õ–∏–º–∏—Ç: MAX_TRACKING_RECORDS_PER_HABIT = 10,000<br/>‚Ä¢ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ ‚Üí 403 Quota Exceeded<br/>‚Ä¢ Memory monitoring (Prometheus + alert –ø—Ä–∏ > 80% memory)<br/>‚Ä¢ –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ: –º–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ PostgreSQL |
| **–¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å** | üü° Quick win –≤–æ–∑–º–æ–∂–µ–Ω –∑–∞ 1 –¥–µ–Ω—å |
| **–û—Å—Ç–∞—Ç–æ—á–Ω—ã–π —Ä–∏—Å–∫** | L=1, I=2, Score=2 (Low) |

---

### R07: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ Audit Log (Repudiation)

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
|----------|----------|
| **ID** | R07 |
| **–ù–∞–∑–≤–∞–Ω–∏–µ** | –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –æ—Ç—Å–ª–µ–¥–∏—Ç—å –∫—Ç–æ –∏ –∫–æ–≥–¥–∞ –≤—ã–ø–æ–ª–Ω–∏–ª –¥–µ–π—Å—Ç–≤–∏—è (—Å–æ–∑–¥–∞–Ω–∏–µ, –∏–∑–º–µ–Ω–µ–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ) |
| **–°–≤—è–∑–∞–Ω–Ω—ã–µ —É–≥—Ä–æ–∑—ã** | T5.4 (Repudiation create/modify), T13.3 (Repudiation update) |
| **–ü–æ—Ç–æ–∫–∏ DFD** | F11, F46 |
| **Likelihood (L)** | 3 (Medium) ‚Äî –ü—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –∏–Ω—Ü–∏–¥–µ–Ω—Ç–∞ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ —Ä–∞—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ |
| **Impact (I)** | 3 (Moderate) ‚Äî –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –¥–æ–∫–∞–∑–∞—Ç—å –¥–µ–π—Å—Ç–≤–∏—è, compliance —Ä–∏—Å–∫–∏ |
| **Risk Score** | **9** üü° **MEDIUM** |
| **–°—Ç—Ä–∞—Ç–µ–≥–∏—è** | **–°–Ω–∏–∑–∏—Ç—å** (Mitigate) ‚Äî –í–Ω–µ–¥—Ä–∏—Ç—å structured logging |
| **–í–ª–∞–¥–µ–ª–µ—Ü** | Backend Developer |
| **–°—Ä–æ–∫** | **2025-12-15** (P2) |
| **–ö—Ä–∏—Ç–µ—Ä–∏–π –∑–∞–∫—Ä—ã—Ç–∏—è** | ‚Ä¢ Structured JSON logs —Å –ø–æ–ª—è–º–∏: user_id, action, resource_type, resource_id, timestamp ‚Äî **NFR-16**<br/>‚Ä¢ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ: CREATE, UPDATE, DELETE –æ–ø–µ—Ä–∞—Ü–∏–π<br/>‚Ä¢ –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π —Å–±–æ—Ä –ª–æ–≥–æ–≤ (ELK/Loki)<br/>‚Ä¢ Retention policy: 90 –¥–Ω–µ–π |
| **–¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å** | üìã Planned v1.2 |
| **–û—Å—Ç–∞—Ç–æ—á–Ω—ã–π —Ä–∏—Å–∫** | L=1, I=2, Score=2 (Low) |

---

### R08: –£—è–∑–≤–∏–º–æ—Å—Ç–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (CVE –≤ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞—Ö)

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
|----------|----------|
| **ID** | R08 |
| **–ù–∞–∑–≤–∞–Ω–∏–µ** | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫ —Å –∏–∑–≤–µ—Å—Ç–Ω—ã–º–∏ —É—è–∑–≤–∏–º–æ—Å—Ç—è–º–∏ |
| **–°–≤—è–∑–∞–Ω–Ω—ã–µ —É–≥—Ä–æ–∑—ã** | –ö–æ—Å–≤–µ–Ω–Ω–æ –≤–ª–∏—è–µ—Ç –Ω–∞ –≤—Å–µ —É–≥—Ä–æ–∑—ã (–º–æ–∂–µ—Ç –¥–∞—Ç—å RCE, privilege escalation) |
| **–ü–æ—Ç–æ–∫–∏ DFD** | –í–µ—Å—å Application Zone |
| **Likelihood (L)** | 3 (Medium) ‚Äî –ù–æ–≤—ã–µ CVE –ø–æ—è–≤–ª—è—é—Ç—Å—è —Ä–µ–≥—É–ª—è—Ä–Ω–æ |
| **Impact (I)** | 4 (Major) ‚Äî –í –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç CVE: RCE, DoS, Info Disclosure |
| **Risk Score** | **12** üü† **HIGH** |
| **–°—Ç—Ä–∞—Ç–µ–≥–∏—è** | **–°–Ω–∏–∑–∏—Ç—å** (Mitigate) ‚Äî Continuous vulnerability scanning |
| **–í–ª–∞–¥–µ–ª–µ—Ü** | DevOps + Security Team |
| **–°—Ä–æ–∫** | **2025-11-01** (P1, —á–∞—Å—Ç–∏—á–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ) |
| **–ö—Ä–∏—Ç–µ—Ä–∏–π –∑–∞–∫—Ä—ã—Ç–∏—è** | ‚Ä¢ `safety` –≤ CI pipeline ‚Äî **NFR-04**<br/>‚Ä¢ `bandit` SAST –≤ CI ‚Äî **NFR-21**<br/>‚Ä¢ Dependabot/Renovate –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ PR<br/>‚Ä¢ SLA: Critical/High CVE –∏—Å–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –∑–∞ ‚â§ 7 –¥–Ω–µ–π<br/>‚Ä¢ Weekly dependency review |
| **–¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å** | üîÑ Partial ‚Äî CI checks –µ—Å—Ç—å, –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –Ω–µ—Ç |
| **–û—Å—Ç–∞—Ç–æ—á–Ω—ã–π —Ä–∏—Å–∫** | L=2, I=3, Score=6 (Medium) |

---

### R09: –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ (Data Integrity)

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
|----------|----------|
| **ID** | R09 |
| **–ù–∞–∑–≤–∞–Ω–∏–µ** | –ü–æ–≤—Ä–µ–∂–¥–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏–≤–æ–¥—è—Ç –∫ –Ω–µ–≤–µ—Ä–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–µ (streak, completion rate) |
| **–°–≤—è–∑–∞–Ω–Ω—ã–µ —É–≥—Ä–æ–∑—ã** | T12.2 (Data corruption calculations), T15.2 (Race conditions) |
| **–ü–æ—Ç–æ–∫–∏ DFD** | F44, F45 |
| **Likelihood (L)** | 2 (Low) ‚Äî –¢—Ä–µ–±—É–µ—Ç—Å—è —Ä–µ–¥–∫–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≥–æ–Ω–∫–∏ –∏–ª–∏ –±–∞–≥ |
| **Impact (I)** | 3 (Moderate) ‚Äî –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –Ω–µ–≤–µ—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, –ø–æ—Ç–µ—Ä—è –¥–æ–≤–µ—Ä–∏—è |
| **Risk Score** | **6** üü° **MEDIUM** |
| **–°—Ç—Ä–∞—Ç–µ–≥–∏—è** | **–°–Ω–∏–∑–∏—Ç—å** (Mitigate) ‚Äî Data validation + —Ç–µ—Å—Ç—ã |
| **–í–ª–∞–¥–µ–ª–µ—Ü** | Backend Developer |
| **–°—Ä–æ–∫** | **2025-11-30** (P2) |
| **–ö—Ä–∏—Ç–µ—Ä–∏–π –∑–∞–∫—Ä—ã—Ç–∏—è** | ‚Ä¢ Validate tracking_records –ø–µ—Ä–µ–¥ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è–º–∏ ‚Äî **NFR-15**<br/>‚Ä¢ Integration —Ç–µ—Å—Ç—ã –Ω–∞ edge cases (–¥—É–±–ª–∏–∫–∞—Ç—ã –¥–∞—Ç, future dates)<br/>‚Ä¢ Property-based testing (hypothesis library) –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏<br/>‚Ä¢ Thread-safe access –∫ _HABITS_DB (–∏–ª–∏ –º–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ DB) |
| **–¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å** | üìã Planned v1.2 |
| **–û—Å—Ç–∞—Ç–æ—á–Ω—ã–π —Ä–∏—Å–∫** | L=1, I=2, Score=2 (Low) |

---

### R10: DoS —á–µ—Ä–µ–∑ –≤—ã—á–∏—Å–ª–∏—Ç–µ–ª—å–Ω–æ —Å–ª–æ–∂–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
|----------|----------|
| **ID** | R10 |
| **–ù–∞–∑–≤–∞–Ω–∏–µ** | –ó–∞–ø—Ä–æ—Å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –Ω–∞ –±–æ–ª—å—à–∏–µ –ø–µ—Ä–∏–æ–¥—ã (year) —Å —Ç—ã—Å—è—á–∞–º–∏ –∑–∞–ø–∏—Å–µ–π –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –∑–∞–≤–∏—Å–∞–Ω–∏—é |
| **–°–≤—è–∑–∞–Ω–Ω—ã–µ —É–≥—Ä–æ–∑—ã** | T12.1 (Expensive calculations), T3.2 (Large payload) |
| **–ü–æ—Ç–æ–∫–∏ DFD** | F44 |
| **Likelihood (L)** | 2 (Low) ‚Äî –¢—Ä–µ–±—É–µ—Ç—Å—è –∞–∫—Ç–∏–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏–ª–∏ –∞—Ç–∞–∫–∞ |
| **Impact (I)** | 3 (Moderate) ‚Äî –ó–∞–º–µ–¥–ª–µ–Ω–∏–µ/–∑–∞–≤–∏—Å–∞–Ω–∏–µ –æ–¥–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞, –≤–æ–∑–º–æ–∂–µ–Ω timeout |
| **Risk Score** | **6** üü° **MEDIUM** |
| **–°—Ç—Ä–∞—Ç–µ–≥–∏—è** | **–°–Ω–∏–∑–∏—Ç—å** (Mitigate) ‚Äî –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è + timeout |
| **–í–ª–∞–¥–µ–ª–µ—Ü** | Backend Developer |
| **–°—Ä–æ–∫** | **2025-12-01** (P2) |
| **–ö—Ä–∏—Ç–µ—Ä–∏–π –∑–∞–∫—Ä—ã—Ç–∏—è** | ‚Ä¢ Performance test: p95 ‚â§ 500ms @ 50 RPS ‚Äî **NFR-09** ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ<br/>‚Ä¢ Request timeout = 30s (uvicorn config)<br/>‚Ä¢ Pagination –¥–ª—è –±–æ–ª—å—à–∏—Ö –¥–∞—Ç–∞—Å–µ—Ç–æ–≤ (future)<br/>‚Ä¢ Caching —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ (Redis, future) |
| **–¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å** | üü¢ Low priority ‚Äî NFR-09 —É–∂–µ –≤—ã–ø–æ–ª–Ω–µ–Ω (p95=2.69ms) |
| **–û—Å—Ç–∞—Ç–æ—á–Ω—ã–π —Ä–∏—Å–∫** | L=1, I=2, Score=2 (Low) |

---

### R11: Container Privilege Escalation

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
|----------|----------|
| **ID** | R11 |
| **–ù–∞–∑–≤–∞–Ω–∏–µ** | –ö–æ–º–ø—Ä–æ–º–µ—Ç–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –¥–æ—Å—Ç—É–ø—É –∫ —Ö–æ—Å—Ç-—Å–∏—Å—Ç–µ–º–µ |
| **–°–≤—è–∑–∞–Ω–Ω—ã–µ —É–≥—Ä–æ–∑—ã** | T14.1 (Root in container), T14.2 (Runtime tampering) |
| **–ü–æ—Ç–æ–∫–∏ DFD** | Application Zone (–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä) |
| **Likelihood (L)** | 2 (Low) ‚Äî –¢—Ä–µ–±—É–µ—Ç—Å—è CVE –≤ Docker/kernel –∏–ª–∏ misconfiguration |
| **Impact (I)** | 5 (Critical) ‚Äî –ü–æ–ª–Ω–∞—è –∫–æ–º–ø—Ä–æ–º–µ—Ç–∞—Ü–∏—è —Ö–æ—Å—Ç–∞, lateral movement |
| **Risk Score** | **10** üü† **HIGH** |
| **–°—Ç—Ä–∞—Çeg–∏—è** | **–°–Ω–∏–∑–∏—Ç—å** (Mitigate) ‚Äî Hardening –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ |
| **–í–ª–∞–¥–µ–ª–µ—Ü** | DevOps Engineer |
| **–°—Ä–æ–∫** | **2025-11-15** (P1 –¥–ª—è production) |
| **–ö—Ä–∏—Ç–µ—Ä–∏–π –∑–∞–∫—Ä—ã—Ç–∏—è** | ‚Ä¢ USER appuser –≤ Dockerfile ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ<br/>‚Ä¢ Read-only root filesystem (`--read-only`)<br/>‚Ä¢ Drop capabilities (`--cap-drop=ALL`)<br/>‚Ä¢ Security scanning (Trivy/Snyk) –≤ CI<br/>‚Ä¢ No privileged mode (`--privileged=false`) |
| **–¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å** | üü° Partial ‚Äî USER –µ—Å—Ç—å, –æ—Å—Ç–∞–ª—å–Ω–æ–µ –Ω—É–∂–Ω–æ |
| **–û—Å—Ç–∞—Ç–æ—á–Ω—ã–π —Ä–∏—Å–∫** | L=1, I=3, Score=3 (Low) |

---

### R12: Data Loss –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ (In-Memory DB)

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
|----------|----------|
| **ID** | R12 |
| **–ù–∞–∑–≤–∞–Ω–∏–µ** | –ü–æ—Ç–µ—Ä—è –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ —Å–µ—Ä–≤–∏—Å–∞ |
| **–°–≤—è–∑–∞–Ω–Ω—ã–µ —É–≥—Ä–æ–∑—ã** | T15.1 (Data loss on restart) |
| **–ü–æ—Ç–æ–∫–∏ DFD** | Data Zone (_HABITS_DB) |
| **Likelihood (L)** | 5 (Very High) ‚Äî –ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ø–æ—Ç–µ—Ä—è –ø—Ä–∏ –ª—é–±–æ–º restart |
| **Impact (I)** | 3 (Moderate) ‚Äî –í MVP/staging –ø—Ä–∏–µ–º–ª–µ–º–æ, –≤ production –∫—Ä–∏—Ç–∏—á–Ω–æ |
| **Risk Score** | **15** üî¥ **CRITICAL** (–¥–ª—è production) |
| **–°—Ç—Ä–∞—Ç–µ–≥–∏—è** | **–ü—Ä–∏–Ω—è—Ç—å** (Accept) –¥–ª—è MVP/staging<br/>**–ò–∑–±–µ–∂–∞—Ç—å** (Avoid) –¥–ª—è production ‚Äî –º–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ PostgreSQL |
| **–í–ª–∞–¥–µ–ª–µ—Ü** | Product Manager (accept decision) / Backend Lead (migration) |
| **–°—Ä–æ–∫** | **Accept**: —Ç–µ–∫—É—â–∞—è –≤–µ—Ä—Å–∏—è MVP<br/>**Migrate**: 2025-12-31 (v2.0) |
| **–ö—Ä–∏—Ç–µ—Ä–∏–π –∑–∞–∫—Ä—ã—Ç–∏—è** | ‚Ä¢ MVP: –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å "data –Ω–µ persistent" –≤ README<br/>‚Ä¢ Production: PostgreSQL + SQLAlchemy<br/>‚Ä¢ Migration script<br/>‚Ä¢ Backup strategy (daily snapshots) |
| **–¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å** | üü¢ Accepted –¥–ª—è —Ç–µ–∫—É—â–µ–π —Ñ–∞–∑—ã |
| **–û—Å—Ç–∞—Ç–æ—á–Ω—ã–π —Ä–∏—Å–∫** | Score=0 –ø–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–∞ PostgreSQL |

---

## –°–≤–æ–¥–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ —Ä–∏—Å–∫–æ–≤ (–ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É)

| Rank | ID | Risk | L | I | Score | –°—Ç–∞—Ç—É—Å | –°—Ä–æ–∫ | –í–ª–∞–¥–µ–ª–µ—Ü |
|------|----|------|---|---|-------|--------|------|----------|
| 1 | R01 | –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ auth/authz | 5 | 5 | **25** üî¥ | Open | 2025-10-31 | Backend Lead |
| 2 | R05 | IDOR –Ω–∞ habit_id | 5 | 4 | **20** üî¥ | Open (‚ÜíR01) | 2025-10-31 | Backend Dev |
| 3 | R02 | Rate Limiting (DDoS) | 4 | 4 | **16** üî¥ | Planned | 2025-11-15 | DevOps |
| 4 | R12 | Data Loss (In-Memory) | 5 | 3 | **15** üî¥ | Accepted | 2025-12-31 | PM/Backend |
| 5 | R03 | –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ HTTPS | 3 | 4 | **12** üü† | Planned | 2025-11-30 | DevOps |
| 6 | R04 | Error Disclosure | 4 | 3 | **12** üü† | In Progress | 2025-10-25 | Backend Dev |
| 7 | R06 | Memory Exhaustion | 3 | 4 | **12** üü† | Quick Win | 2025-11-30 | Backend+DevOps |
| 8 | R08 | CVE –≤ dependencies | 3 | 4 | **12** üü† | Partial | 2025-11-01 | DevOps |
| 9 | R11 | Container Escalation | 2 | 5 | **10** üü† | Partial | 2025-11-15 | DevOps |
| 10 | R07 | Audit Log –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç | 3 | 3 | **9** üü° | Planned | 2025-12-15 | Backend Dev |
| 11 | R09 | Data Integrity (stats) | 2 | 3 | **6** üü° | Planned | 2025-11-30 | Backend Dev |
| 12 | R10 | DoS —á–µ—Ä–µ–∑ stats | 2 | 3 | **6** üü° | Low (NFR OK) | 2025-12-01 | Backend Dev |

**–õ–µ–≥–µ–Ω–¥–∞:**
- üî¥ Critical (15-25): –ù–µ–º–µ–¥–ª–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è
- üü† High (8-14): –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç
- üü° Medium (4-7): –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç
- üü¢ Low (1-3): –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

---

## Quick Wins (–ë—ã—Å—Ç—Ä—ã–µ –ø–æ–±–µ–¥—ã < 2 –¥–Ω–µ–π —Ä–∞–±–æ—Ç—ã)

| ID | –†–∏—Å–∫ | –î–µ–π—Å—Ç–≤–∏–µ | Effort | –°—Ä–æ–∫ |
|----|------|----------|--------|------|
| R04 | Error Disclosure | –§–∏–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å exception handlers, —É–±—Ä–∞—Ç—å stack traces –≤ prod | 4h | 2025-10-15 |
| R06 | Memory Exhaustion | –î–æ–±–∞–≤–∏—Ç—å MAX_HABITS_PER_USER = 100, MAX_RECORDS = 10k | 2h | 2025-10-16 |
| R08 | CVE scanning | –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Dependabot –≤ GitHub | 1h | 2025-10-16 |
| R11 | Container hardening | –î–æ–±–∞–≤–∏—Ç—å `--read-only`, `--cap-drop=ALL` –≤ docker-compose | 2h | 2025-10-17 |

**–ò—Ç–æ–≥–æ:** 9 —á–∞—Å–æ–≤ —Ä–∞–±–æ—Ç—ã ‚Üí —Å–Ω–∏–∂–µ–Ω–∏–µ 4 —Ä–∏—Å–∫–æ–≤

---

## –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ä–∏—Å–∫–æ–≤

### 1. –°–Ω–∏–∑–∏—Ç—å (Mitigate) ‚Äî 10 —Ä–∏—Å–∫–æ–≤

**R01, R02, R03, R04, R05, R06, R07, R08, R09, R11**

–í–Ω–µ–¥—Ä–µ–Ω–∏–µ –∫–æ–Ω—Ç—Ä–æ–ª–µ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –¥–ª—è —Å–Ω–∏–∂–µ–Ω–∏—è –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏ –∏–ª–∏ –≤–ª–∏—è–Ω–∏—è.

### 2. –ü—Ä–∏–Ω—è—Ç—å (Accept) ‚Äî 1 —Ä–∏—Å–∫

**R12** (–¥–ª—è MVP —Ñ–∞–∑—ã) ‚Äî –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –æ –ø—Ä–∏–µ–º–ª–µ–º–æ—Å—Ç–∏ —Ä–∏—Å–∫–∞ –≤ —Ç–µ–∫—É—â–µ–π —Ñ–∞–∑–µ.

### 3. –ò–∑–±–µ–∂–∞—Ç—å (Avoid) ‚Äî 1 —Ä–∏—Å–∫

**R12** (–¥–ª—è production) ‚Äî –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ PostgreSQL –ø–æ–ª–Ω–æ—Å—Ç—å—é —É—Å—Ç—Ä–∞–Ω—è–µ—Ç —Ä–∏—Å–∫ –ø–æ—Ç–µ—Ä–∏ –¥–∞–Ω–Ω—ã—Ö.

### 4. –ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ (Transfer) ‚Äî 0 —Ä–∏—Å–∫–æ–≤

–í —Ç–µ–∫—É—â–µ–π —Ñ–∞–∑–µ –Ω–µ—Ç —Ä–∏—Å–∫–æ–≤ –¥–ª—è –ø–µ—Ä–µ–Ω–æ—Å–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —á–µ—Ä–µ–∑ —Å—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏–µ –∏–ª–∏ outsourcing).

---

## –°–≤—è–∑—å —Å –∑–∞–¥–∞—á–∞–º–∏ (Issues)

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ GitHub Issues

```markdown
### Epic: Security Hardening (P04 - Threat Model)

#### P0 - Critical (–±–ª–æ–∫–∏—Ä—É—é—Ç production)
- [ ] #101 [P0] Implement JWT Authentication (R01, R05) ‚Äî @backend-lead ‚Äî Due: 2025-10-31
- [ ] #102 [P0] Add Authorization checks (IDOR protection) (R01, R05) ‚Äî @backend-dev ‚Äî Due: 2025-10-31

#### P1 - High (—Ç—Ä–µ–±—É—é—Ç—Å—è –¥–ª—è production)
- [ ] #103 [P1] Implement Rate Limiting middleware (R02) ‚Äî @devops ‚Äî Due: 2025-11-15
- [ ] #104 [P1] Configure HTTPS/TLS on production (R03) ‚Äî @devops ‚Äî Due: 2025-11-30
- [ ] #105 [P1] Finalize Error Handling (RFC7807) (R04) ‚Äî @backend-dev ‚Äî Due: 2025-10-25
- [ ] #106 [P1] Container Security Hardening (R11) ‚Äî @devops ‚Äî Due: 2025-11-15
- [ ] #107 [P1] Dependency Scanning Automation (R08) ‚Äî @devops ‚Äî Due: 2025-11-01

#### P2 - Medium (—É–ª—É—á—à–µ–Ω–∏—è)
- [ ] #108 [P2] Add Resource Quotas (R06) ‚Äî @backend-dev ‚Äî Due: 2025-11-30
- [ ] #109 [P2] Implement Audit Logging (R07) ‚Äî @backend-dev ‚Äî Due: 2025-12-15
- [ ] #110 [P2] Data Integrity Validation (R09) ‚Äî @backend-dev ‚Äî Due: 2025-11-30

#### P3 - Low (–¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ)
- [ ] #111 [P3] Migrate to PostgreSQL (R12) ‚Äî @backend-lead ‚Äî Due: 2025-12-31
```

---

## –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞

### KPI –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è —Ä–∏—Å–∫–æ–≤

| –ú–µ—Ç—Ä–∏–∫–∞ | –¶–µ–ª–µ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ | –°—Ä–æ–∫ |
|---------|------------------|------|
| Critical —Ä–∏—Å–∫–æ–≤ (Score ‚â•15) | 0 | 2025-11-30 |
| High —Ä–∏—Å–∫–æ–≤ (Score 8-14) | ‚â§ 2 | 2025-12-31 |
| –ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏ | ‚â• 90% | –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å (NFR-19) ‚úÖ |
| CVE Critical/High | 0 —Å –≤–æ–∑—Ä–∞—Å—Ç–æ–º > 7 –¥–Ω–µ–π | –ü–æ—Å—Ç–æ—è–Ω–Ω–æ (NFR-04) |
| Endpoints —Å auth | 100% (–∫—Ä–æ–º–µ /health) | 2025-10-31 |
| HTTPS enforcement | 100% –≤ production | 2025-11-30 |

---

## –ü–ª–∞–Ω –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–æ —Å—Ä–æ–∫–∞–º

### –û–∫—Ç—è–±—Ä—å 2025 (Sprint 1)

**–ù–µ–¥–µ–ª—è 1 (10-16 –æ–∫—Ç):**
- Quick wins: R04, R06, R08 partial, R11 partial
- –ù–∞—á–∞—Ç—å R01 (authentication design)

**–ù–µ–¥–µ–ª—è 2 (17-23 –æ–∫—Ç):**
- R01 (JWT implementation)
- R04 —Ñ–∏–Ω–∞–ª–∏–∑–∞—Ü–∏—è

**–ù–µ–¥–µ–ª—è 3 (24-31 –æ–∫—Ç):**
- R01 –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ
- R05 (IDOR protection)

### –ù–æ—è–±—Ä—å 2025 (Sprint 2)

**–ù–µ–¥–µ–ª—è 1 (1-8 –Ω–æ—è):**
- R08 —Ñ–∏–Ω–∞–ª–∏–∑–∞—Ü–∏—è (Dependabot)
- R02 –Ω–∞—á–∞–ª–æ (Rate Limiting design)

**–ù–µ–¥–µ–ª—è 2 (9-15 –Ω–æ—è):**
- R02 implementation
- R11 container hardening

**–ù–µ–¥–µ–ª—è 3 (16-22 –Ω–æ—è):**
- R03 –Ω–∞—á–∞–ª–æ (HTTPS setup)

**–ù–µ–¥–µ–ª—è 4 (23-30 –Ω–æ—è):**
- R03 –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ
- R06 resource quotas

### –î–µ–∫–∞–±—Ä—å 2025 (Sprint 3)

**–ù–µ–¥–µ–ª—è 1-2 (1-15 –¥–µ–∫):**
- R07 Audit Logging

**–ù–µ–¥–µ–ª—è 3-4 (16-31 –¥–µ–∫):**
- R09, R10 (data integrity)
- R12 –Ω–∞—á–∞–ª–æ –º–∏–≥—Ä–∞—Ü–∏–∏ PostgreSQL

---

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ø–µ—Ä–µ—Å–º–æ—Ç—Ä

### –ß–∞—Å—Ç–æ—Ç–∞ –ø–µ—Ä–µ—Å–º–æ—Ç—Ä–∞

- **–ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ**: –°—Ç–∞—Ç—É—Å –∑–∞–¥–∞—á P0/P1
- **Bi-weekly**: –ù–æ–≤—ã–µ —É–≥—Ä–æ–∑—ã –∏ CVE
- **–ï–∂–µ–º–µ—Å—è—á–Ω–æ**: –ü–æ–ª–Ω—ã–π –ø–µ—Ä–µ—Å–º–æ—Ç—Ä —Ä–µ–µ—Å—Ç—Ä–∞ —Ä–∏—Å–∫–æ–≤
- **–ü–æ—Å–ª–µ –∏–Ω—Ü–∏–¥–µ–Ω—Ç–∞**: –ù–µ–º–µ–¥–ª–µ–Ω–Ω—ã–π review

### –¢—Ä–∏–≥–≥–µ—Ä—ã –¥–ª—è –ø–µ—Ä–µ—Å–º–æ—Ç—Ä–∞

1. –ù–æ–≤–∞—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è CVE –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è—Ö
2. Security incident –∏–ª–∏ breach attempt
3. –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã (–Ω–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã)
4. –†–µ–ª–∏–∑ –≤ production
5. –ò–∑–º–µ–Ω–µ–Ω–∏–µ compliance —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π

---

## –í–ª–∞–¥–µ–ª—å—Ü—ã –∏ —Ä–æ–ª–∏

| –†–æ–ª—å | –û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å | –ö–æ–Ω—Ç–∞–∫—Ç |
|------|----------------|---------|
| **Backend Team Lead** | R01, R12 (migration) | @backend-lead |
| **Backend Developer** | R04, R05, R06, R07, R09, R10 | @backend-dev |
| **DevOps Engineer** | R02, R03, R08, R11 | @devops |
| **Security Team** | Review –≤—Å–µ—Ö –∫–æ–Ω—Ç—Ä–æ–ª–µ–π, R08 | @security |
| **Product Manager** | R12 (accept decision), –ø—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è | @pm |

---

## Compliance –∏ —Ä–µ–≥—É–ª—è—Ç–æ—Ä–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ–Ω–∏–º–æ (–µ—Å–ª–∏ –µ—Å—Ç—å PII)

- **GDPR** (–µ—Å–ª–∏ –µ–≤—Ä–æ–ø–µ–π—Å–∫–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏): R01 (auth), R07 (audit), R12 (data retention)
- **CCPA** (California): –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ GDPR
- **SOC 2**: R02 (availability), R07 (audit), R08 (vulnerability management)

### –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å

üü° **–ù–µ –≥–æ—Ç–æ–≤–æ –∫ compliance** ‚Äî —Ç—Ä–µ–±—É–µ—Ç—Å—è R01, R07, R12 (PostgreSQL) –¥–ª—è –±–∞–∑–æ–≤–æ–≥–æ —É—Ä–æ–≤–Ω—è.

---

## Revision History

| –î–∞—Ç–∞       | –í–µ—Ä—Å–∏—è | –ê–≤—Ç–æ—Ä | –ò–∑–º–µ–Ω–µ–Ω–∏—è |
|------------|--------|-------|-----------|
| 2025-10-10 | 1.0    | Team  | –ü–µ—Ä–≤–∞—è –≤–µ—Ä—Å–∏—è —Ä–µ–µ—Å—Ç—Ä–∞ —Å 12 —Ä–∏—Å–∫–∞–º–∏ –∏ –ø–ª–∞–Ω–æ–º –æ–±—Ä–∞–±–æ—Ç–∫–∏ |
